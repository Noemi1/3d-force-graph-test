"use strict";(self.webpackChunkMonitoramento=self.webpackChunkMonitoramento||[]).push([[667],{8667:(H,x,r)=>{r.r(x),r.d(x,{ApiGroupModule:()=>z});var p=r(6895),J=r(4466),a=r(433),d=r(6811),c=r(9808),T=r(1060),t=r(4650),G=r(7549),C=r(7185),Z=r(9243),A=r(3972),F=r(1892),O=r(9535),Y=r(2505);function w(e,n){1&e&&(t.TgZ(0,"p",17),t._uU(1,"This field is required."),t.qZA())}function N(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,w,2,0,"p",16),t.qZA()),2&e){t.oxw();const o=t.MAs(10);t.xp6(1),t.Q6J("ngIf",o.errors.required)}}function Q(e,n){if(1&e&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o)}}function U(e,n){1&e&&(t.TgZ(0,"p",8),t._uU(1,"Fill all required fields correctly to save"),t.qZA())}function D(e,n){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,Q,2,1,"p",19),t.YNc(2,U,2,0,"p",20),t.qZA()),2&e){t.oxw();const o=t.MAs(1),s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.erro),t.xp6(1),t.Q6J("ngIf",o.invalid&&0==s.erro.length)}}function j(e,n){1&e&&t._UZ(0,"span",21)}function S(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"form",2,3),t.NdJ("ngSubmit",function(){t.CHM(o);const i=t.MAs(1),l=t.oxw();return t.KtG(l.send(i))}),t.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"label",7),t._uU(6,"Name: "),t.TgZ(7,"span",8),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"input",9,10),t.NdJ("ngModelChange",function(i){t.CHM(o);const l=t.oxw();return t.KtG(l.object.name=i)}),t.qZA(),t.YNc(11,N,2,1,"div",11),t.qZA()()(),t.TgZ(12,"div",12),t.YNc(13,D,3,2,"div",13),t.TgZ(14,"button",14),t.YNc(15,j,1,0,"span",15),t.TgZ(16,"span"),t._uU(17,"Save"),t.qZA()()()()}if(2&e){const o=t.MAs(1),s=t.MAs(10),i=t.oxw();t.xp6(9),t.Q6J("ngModel",i.object.name),t.xp6(2),t.Q6J("ngIf",s.touched&&s.errors),t.xp6(2),t.Q6J("ngIf",i.erro||o.invalid),t.xp6(1),t.Q6J("disabled",o.invalid||i.loading),t.xp6(1),t.Q6J("ngIf",i.loading)}}let y=(()=>{class e{constructor(o,s,i,l,g,f,_,v,b){this.modal=o,this.toastr=s,this.activatedRoute=i,this.router=l,this.crypto=g,this.loadingUtils=f,this.location=_,this.apiGroupService=v,this.dropdown=b,this.object=new T.B,this.title="Create Group",this.erro=[],this.loading=!1,this.isEditPage=!1,this.status={success:!1},this.success={true:"Opera\xe7\xe3o conclu\xedda com sucesso!",false:"Algum erro foi encontrado. Processo interrompido"},this.subscribers=[];var m=this.loadingUtils.loading.subscribe(h=>this.loading=h);this.subscribers.push(m);var u=this.activatedRoute.params.subscribe(h=>{h.id?(this.idEncrypted=h.id,this.isEditPage=!0,this.title="Edit group",this.object.id=this.crypto.decrypt(this.idEncrypted),this.loading=!0,(0,c.n)(this.apiGroupService.get(this.object.id)).then(M=>{this.object=M,this.modalOpen=!0}).catch(M=>{this.modalOpen=!1,this.voltar(),this.toastr.error("This page could not be loaded")})):(this.modalOpen=!0,this.isEditPage=!1,this.title="Create group")});this.subscribers.push(u)}ngOnDestroy(){this.subscribers.forEach(o=>o.unsubscribe())}voltar(){this.modalOpen=!1,setTimeout(()=>{this.router.navigate(this.isEditPage?["../.."]:[".."],{relativeTo:this.activatedRoute})},300)}send(o){if(this.erro=[],o.invalid)return this.toastr.error("There are one or more invalid fields."),void(this.erro=["There are one or more invalid fields."]);(0,c.n)(this.apiGroupService.send(this.object)).then(s=>{s.success?(this.toastr.success(this.success.true),this.modal.voltar(),(0,c.n)(this.dropdown.getApiGroup())):(this.toastr.error(this.success.false),this.erro.push(s.message))}).catch(s=>{this.toastr.error(s.message),this.erro.push(s.message)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(G.Q),t.Y36(C._W),t.Y36(d.gz),t.Y36(d.F0),t.Y36(Z.w),t.Y36(A.b),t.Y36(p.Ye),t.Y36(F.e),t.Y36(O.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],decls:3,vars:4,consts:[[3,"modalOpen","title","template","maxWidth","onClose"],["template",""],[3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-12"],["for","name"],[1,"text-danger"],["type","text","name","name","id","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],[1,"d-flex","align-items-center","p-0","mt-1"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","text-danger error",4,"ngIf"],[1,"text-danger","error"],[1,"m-0"],["class","text-danger",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,s){if(1&o&&(t.TgZ(0,"app-sub-modal",0),t.NdJ("onClose",function(){return s.voltar()}),t.qZA(),t.YNc(1,S,18,5,"ng-template",null,1,t.W1O)),2&o){const i=t.MAs(2);t.Q6J("modalOpen",s.modalOpen)("title",s.title)("template",i)("maxWidth","400px")}},dependencies:[p.sg,p.O5,Y.B,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F],encapsulation:2}),e})();function I(e,n){if(1&e&&(t.TgZ(0,"p",10),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o)}}function E(e,n){if(1&e&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o)}}function q(e,n){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,E,2,1,"p",12),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.erro)}}function R(e,n){1&e&&t._UZ(0,"span",14)}function B(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"form",2,3),t.NdJ("ngSubmit",function(){t.CHM(o);const i=t.MAs(1),l=t.oxw();return t.KtG(l.send(i))}),t.TgZ(2,"div")(3,"p",4),t._uU(4,"This operation is not reversible."),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"Are you sure you want to proceed with the deletion?"),t.qZA(),t.YNc(7,I,2,1,"p",5),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,q,2,1,"div",7),t.TgZ(10,"button",8),t.YNc(11,R,1,0,"span",9),t.TgZ(12,"span"),t._uU(13,"Delete"),t.qZA()()()()}if(2&e){const o=t.MAs(1),s=t.oxw();t.xp6(7),t.Q6J("ngForOf",s.erro),t.xp6(2),t.Q6J("ngIf",s.erro||o.invalid),t.xp6(1),t.Q6J("disabled",o.invalid||s.loading),t.xp6(1),t.Q6J("ngIf",s.loading)}}const W=[{path:"",component:y},{path:":id",component:y},{path:"delete/:id",component:(()=>{class e{constructor(o,s,i,l,g,f,_,v){this.toastr=o,this.activatedRoute=s,this.router=i,this.crypto=l,this.loadingUtils=g,this.location=f,this.apiGroupService=_,this.dropdown=v,this.object=new T.B,this.erro=[],this.loading=!1,this.status={success:!1},this.success={true:"Opera\xe7\xe3o conclu\xedda com sucesso!",false:"Algum erro foi encontrado. Processo interrompido"},this.subscribers=[];var b=this.loadingUtils.loading.subscribe(m=>this.loading=m);this.subscribers.push(b),this.activatedRoute.params.subscribe(m=>{m.id?(this.idEncrypted=m.id,this.object.id=this.crypto.decrypt(this.idEncrypted),this.loading=!0,(0,c.n)(this.apiGroupService.get(this.object.id)).then(u=>{this.object=u,this.modalOpen=!0}).catch(u=>{this.modalOpen=!1,this.voltar(),this.toastr.error("This page could not be loaded")})):this.modalOpen=!0})}ngOnDestroy(){this.subscribers.forEach(o=>o.unsubscribe())}voltar(){this.modalOpen=!1,setTimeout(()=>{this.router.navigate(["../.."],{relativeTo:this.activatedRoute})},300)}send(o){if(this.erro=[],o.invalid)return this.toastr.error("There are one or more invalid fields."),void(this.erro=["There are one or more invalid fields."]);(0,c.n)(this.apiGroupService.delete(this.object.id)).then(s=>{s.success?this.toastr.success(this.success.true):this.toastr.error(this.success.false),(0,c.n)(this.dropdown.getApiGroup()),this.modalOpen=!1}).catch(s=>{this.toastr.error(s.message),this.erro.push(s.message)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(C._W),t.Y36(d.gz),t.Y36(d.F0),t.Y36(Z.w),t.Y36(A.b),t.Y36(p.Ye),t.Y36(F.e),t.Y36(O.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-delete"]],decls:3,vars:4,consts:[[3,"modalOpen","title","template","maxWidth","onClose"],["template",""],[3,"ngSubmit"],["form","ngForm"],[1,"texxt-info","mt-2"],["class","text-danger mt-2","style","word-wrap: break-word;",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","p-0","mt-1"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"text-danger","mt-2",2,"word-wrap","break-word"],[1,"m-0"],["class","text-danger",4,"ngFor","ngForOf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,s){if(1&o&&(t.TgZ(0,"app-sub-modal",0),t.NdJ("onClose",function(){return s.voltar()}),t.qZA(),t.YNc(1,B,14,4,"ng-template",null,1,t.W1O)),2&o){const i=t.MAs(2);t.Q6J("modalOpen",s.modalOpen)("title","Delete group")("template",i)("maxWidth","400px")}},dependencies:[p.sg,p.O5,Y.B,a._Y,a.JL,a.F],encapsulation:2}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(W),d.Bz]}),e})(),z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,P,J.m,a.u5]}),e})()}}]);