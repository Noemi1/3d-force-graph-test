"use strict";(self.webpackChunkMonitoramento=self.webpackChunkMonitoramento||[]).push([[473],{6473:(G,b,r)=>{r.r(b),r.d(b,{ApplicationSoftwareModule:()=>z});var p=r(6895),d=r(6811),m=r(9808),x=r(1060),t=r(4650),S=r(7549),T=r(7185),C=r(9243),Z=r(3972),A=r(9340),F=r(9535),w=r(2505),a=r(433);function y(e,s){1&e&&(t.TgZ(0,"p",17),t._uU(1,"This field is required."),t.qZA())}function J(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,y,2,0,"p",16),t.qZA()),2&e){t.oxw();const o=t.MAs(10);t.xp6(1),t.Q6J("ngIf",o.errors.required)}}function M(e,s){if(1&e&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o)}}function N(e,s){1&e&&(t.TgZ(0,"p",8),t._uU(1,"Fill all required fields correctly to save"),t.qZA())}function Q(e,s){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,M,2,1,"p",19),t.YNc(2,N,2,0,"p",20),t.qZA()),2&e){t.oxw();const o=t.MAs(1),n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.erro),t.xp6(1),t.Q6J("ngIf",o.invalid&&0==n.erro.length)}}function U(e,s){1&e&&t._UZ(0,"span",21)}function D(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"form",2,3),t.NdJ("ngSubmit",function(){t.CHM(o);const i=t.MAs(1),l=t.oxw();return t.KtG(l.send(i))}),t.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"label",7),t._uU(6,"Name: "),t.TgZ(7,"span",8),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"input",9,10),t.NdJ("ngModelChange",function(i){t.CHM(o);const l=t.oxw();return t.KtG(l.object.name=i)}),t.qZA(),t.YNc(11,J,2,1,"div",11),t.qZA()()(),t.TgZ(12,"div",12),t.YNc(13,Q,3,2,"div",13),t.TgZ(14,"button",14),t.YNc(15,U,1,0,"span",15),t.TgZ(16,"span"),t._uU(17,"Save"),t.qZA()()()()}if(2&e){const o=t.MAs(1),n=t.MAs(10),i=t.oxw();t.xp6(9),t.Q6J("ngModel",i.object.name),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(2),t.Q6J("ngIf",i.erro||o.invalid),t.xp6(1),t.Q6J("disabled",o.invalid||i.loading),t.xp6(1),t.Q6J("ngIf",i.loading)}}let O=(()=>{class e{constructor(o,n,i,l,h,g,f,_,v){this.modal=o,this.toastr=n,this.activatedRoute=i,this.router=l,this.crypto=h,this.loadingUtils=g,this.location=f,this.applicationSoftwareService=_,this.dropdown=v,this.object=new x.B,this.title="Create ",this.erro=[],this.loading=!1,this.isEditPage=!1,this.status={success:!1},this.success={true:"Opera\xe7\xe3o conclu\xedda com sucesso!",false:"Algum erro foi encontrado. Processo interrompido"},this.subscribers=[];var u=this.loadingUtils.loading.subscribe(c=>this.loading=c);this.subscribers.push(u),this.activatedRoute.params.subscribe(c=>{c.id?(this.idEncrypted=c.id,this.isEditPage=!0,this.title="Edit ",this.object.id=this.crypto.decrypt(this.idEncrypted),this.loading=!0,(0,m.n)(this.applicationSoftwareService.get(this.object.id)).then(Y=>{this.object=Y,this.modalOpen=!0}).catch(Y=>{this.modalOpen=!1,this.voltar(),this.toastr.error("This page could not be loaded")})):(this.modalOpen=!0,this.isEditPage=!1,this.title="Create ")})}ngOnDestroy(){this.subscribers.forEach(o=>o.unsubscribe())}voltar(){this.modalOpen=!1,setTimeout(()=>{this.router.navigate(this.isEditPage?["../.."]:[".."],{relativeTo:this.activatedRoute})},300)}send(o){if(this.erro=[],o.invalid)return this.toastr.error("There are one or more invalid fields."),void(this.erro=["There are one or more invalid fields."]);(0,m.n)(this.applicationSoftwareService.send(this.object)).then(n=>{n.success?(this.toastr.success(this.success.true),this.modal.voltar(),(0,m.n)(this.applicationSoftwareService.getList())):(this.toastr.error(this.success.false),this.erro.push(n.message))}).catch(n=>{this.toastr.error(n.message),this.erro.push(n.message)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(S.Q),t.Y36(T._W),t.Y36(d.gz),t.Y36(d.F0),t.Y36(C.w),t.Y36(Z.b),t.Y36(p.Ye),t.Y36(A.i),t.Y36(F.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],decls:3,vars:4,consts:[[3,"modalOpen","title","template","maxWidth","onClose"],["template",""],[3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-12"],["for","name"],[1,"text-danger"],["type","text","name","name","id","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],[1,"d-flex","align-items-center","p-0","mt-1"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","text-danger error",4,"ngIf"],[1,"text-danger","error"],[1,"m-0"],["class","text-danger",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,n){if(1&o&&(t.TgZ(0,"app-sub-modal",0),t.NdJ("onClose",function(){return n.voltar()}),t.qZA(),t.YNc(1,D,18,5,"ng-template",null,1,t.W1O)),2&o){const i=t.MAs(2);t.Q6J("modalOpen",n.modalOpen)("title",n.title)("template",i)("maxWidth","400px")}},dependencies:[p.sg,p.O5,w.B,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]}),e})();function j(e,s){if(1&e&&(t.TgZ(0,"p",10),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o)}}function I(e,s){if(1&e&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o)}}function E(e,s){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,I,2,1,"p",12),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.erro)}}function q(e,s){1&e&&t._UZ(0,"span",14)}function R(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"form",2,3),t.NdJ("ngSubmit",function(){t.CHM(o);const i=t.MAs(1),l=t.oxw();return t.KtG(l.send(i))}),t.TgZ(2,"div")(3,"p",4),t._uU(4,"This operation is not reversible."),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"Are you sure you want to proceed with the deletion?"),t.qZA(),t.YNc(7,j,2,1,"p",5),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,E,2,1,"div",7),t.TgZ(10,"button",8),t.YNc(11,q,1,0,"span",9),t.TgZ(12,"span"),t._uU(13,"Delete"),t.qZA()()()()}if(2&e){const o=t.MAs(1),n=t.oxw();t.xp6(7),t.Q6J("ngForOf",n.erro),t.xp6(2),t.Q6J("ngIf",n.erro||o.invalid),t.xp6(1),t.Q6J("disabled",o.invalid||n.loading),t.xp6(1),t.Q6J("ngIf",n.loading)}}const B=[{path:"",component:O},{path:":id",component:O},{path:"delete/:id",component:(()=>{class e{constructor(o,n,i,l,h,g,f,_){this.toastr=o,this.activatedRoute=n,this.router=i,this.crypto=l,this.loadingUtils=h,this.location=g,this.applicationSoftwareService=f,this.dropdown=_,this.object=new x.B,this.erro=[],this.loading=!1,this.status={success:!1},this.success={true:"Opera\xe7\xe3o conclu\xedda com sucesso!",false:"Algum erro foi encontrado. Processo interrompido"},this.subscribers=[];var v=this.loadingUtils.loading.subscribe(u=>this.loading=u);this.subscribers.push(v),this.activatedRoute.params.subscribe(u=>{u.id?(this.idEncrypted=u.id,this.object.id=this.crypto.decrypt(this.idEncrypted),this.loading=!0,(0,m.n)(this.applicationSoftwareService.get(this.object.id)).then(c=>{this.object=c,this.modalOpen=!0}).catch(c=>{this.modalOpen=!1,this.voltar(),this.toastr.error("This page could not be loaded")})):this.modalOpen=!0})}ngOnDestroy(){this.subscribers.forEach(o=>o.unsubscribe())}voltar(){this.modalOpen=!1,setTimeout(()=>{this.router.navigate(["../.."],{relativeTo:this.activatedRoute})},300)}send(o){if(this.erro=[],o.invalid)return this.toastr.error("There are one or more invalid fields."),void(this.erro=["There are one or more invalid fields."]);(0,m.n)(this.applicationSoftwareService.delete(this.object.id)).then(n=>{n.success?this.toastr.success(this.success.true):this.toastr.error(this.success.false),(0,m.n)(this.dropdown.getApplicationSoftware()),this.modalOpen=!1}).catch(n=>{this.toastr.error(n.message),this.erro.push(n.message)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(T._W),t.Y36(d.gz),t.Y36(d.F0),t.Y36(C.w),t.Y36(Z.b),t.Y36(p.Ye),t.Y36(A.i),t.Y36(F.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-delete"]],decls:3,vars:4,consts:[[3,"modalOpen","title","template","maxWidth","onClose"],["template",""],[3,"ngSubmit"],["form","ngForm"],[1,"texxt-info","mt-2"],["class","text-danger mt-2","style","word-wrap: break-word;",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","p-0","mt-1"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"text-danger","mt-2",2,"word-wrap","break-word"],[1,"m-0"],["class","text-danger",4,"ngFor","ngForOf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,n){if(1&o&&(t.TgZ(0,"app-sub-modal",0),t.NdJ("onClose",function(){return n.voltar()}),t.qZA(),t.YNc(1,R,14,4,"ng-template",null,1,t.W1O)),2&o){const i=t.MAs(2);t.Q6J("modalOpen",n.modalOpen)("title","Delete Application software")("template",i)("maxWidth","400px")}},dependencies:[p.sg,p.O5,w.B,a._Y,a.JL,a.F]}),e})()}];let W=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(B),d.Bz]}),e})();var P=r(4466);let z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,W,P.m,a.u5]}),e})()}}]);